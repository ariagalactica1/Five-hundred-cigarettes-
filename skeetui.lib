--[[
  GameSense UI Replica (Client-Sided / LocalScript)
  -------------------------------------------------
  • Drop this script into StarterPlayer > StarterPlayerScripts (as a LocalScript)
  • No external assets; pure Instance.new UI with Roblox primitives
  • Components: Sidebar, Header, Content with two cards: "Anti-aimbot angles" and "Fake lag"
  • Includes reusable Toggle, Slider, and Dropdown components with state + callback hooks

  NOTE: This is a visual/UI replica. It does not implement any gameplay functionality.
]]

--// Utility
local GuiService = game:GetService("GuiService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local function create(parent, className, props, children)
	local inst = Instance.new(className)
	for k, v in pairs(props or {}) do inst[k] = v end
	inst.Parent = parent
	for _, child in ipairs(children or {}) do child.Parent = inst end
	return inst
end

local function roundCorner(parent, radius)
	create(parent, "UICorner", {CornerRadius = UDim.new(0, radius or 8)})
end

local function stroke(parent, color, thickness, transparency)
	create(parent, "UIStroke", {
		Color = color or Color3.fromRGB(45,45,45),
		Thickness = thickness or 1,
		Transparency = transparency or 0
	})
end

local function padding(parent, l, t, r, b)
	create(parent, "UIPadding", {
		PaddingLeft   = UDim.new(0, l or 0),
		PaddingTop    = UDim.new(0, t or 0),
		PaddingRight  = UDim.new(0, r or 0),
		PaddingBottom = UDim.new(0, b or 0)
	})
end

local function list(parent, kind, paddingPx)
	return create(parent, kind or "UIListLayout", {
		Padding = UDim.new(0, paddingPx or 6),
		HorizontalAlignment = Enum.HorizontalAlignment.Left,
		SortOrder = Enum.SortOrder.LayoutOrder
	})
end

local function grid(parent, cellX, cellY, fillDir, startCorner, paddingPx)
	return create(parent, "UIGridLayout", {
		CellSize = UDim2.new(0, cellX or 180, 0, cellY or 40),
		CellPadding = UDim2.new(0, paddingPx or 8, 0, paddingPx or 8),
		FillDirectionMaxCells = 2,
		FillDirection = fillDir or Enum.FillDirection.Horizontal,
		StartCorner = startCorner or Enum.StartCorner.TopLeft,
		HorizontalAlignment = Enum.HorizontalAlignment.Left,
		SortOrder = Enum.SortOrder.LayoutOrder
	})
end

--// Theme
local Theme = {
	bg = Color3.fromRGB(16,16,16),
	panel = Color3.fromRGB(22,22,22),
	panelAlt = Color3.fromRGB(26,26,26),
	accent = Color3.fromRGB(104, 233, 92), -- gamesense green
	muted = Color3.fromRGB(145,145,145),
	text = Color3.fromRGB(235,235,235),
	textDim = Color3.fromRGB(170,170,170),
	stroke = Color3.fromRGB(38,38,38)
}

--// Root GUI
local screen = create(game.Players.LocalPlayer:WaitForChild("PlayerGui"), "ScreenGui", {
	Name = "GameSenseReplica",
	IgnoreGuiInset = true,
	ResetOnSpawn = false,
	ZIndexBehavior = Enum.ZIndexBehavior.Sibling
})

-- blur-like soft shadow
local function addShadow(frame)
	local shadow = create(frame, "ImageLabel", {
		ZIndex = 0,
		BackgroundTransparency = 1,
		Image = "rbxassetid://5028857084", -- soft drop shadow
		ScaleType = Enum.ScaleType.Slice,
		SliceCenter = Rect.new(24,24,276,276),
		ImageTransparency = 0.5,
		ImageColor3 = Color3.fromRGB(0,0,0),
		Size = UDim2.new(1, 40, 1, 40),
		Position = UDim2.new(0, -20, 0, -10)
	})
	shadow.Name = "_Shadow"
	shadow.ZIndex = frame.ZIndex - 1
end

-- Main container window
local window = create(screen, "Frame", {
	AnchorPoint = Vector2.new(0.5,0.5),
	Position = UDim2.new(0.5,0,0.5,0),
	Size = UDim2.new(0, 950, 0, 600),
	BackgroundColor3 = Theme.panel,
	BorderSizePixel = 0
})
roundCorner(window, 12)
stroke(window, Theme.stroke, 1)
addShadow(window)

-- Header
local header = create(window, "Frame", {
	Size = UDim2.new(1,0,0,56),
	BackgroundColor3 = Theme.panelAlt,
	BorderSizePixel = 0
})
roundCorner(header, 12)

padding(header, 16,10,16,10)

local headerRow = list(header, "UIListLayout", 10)
headerRow.FillDirection = Enum.FillDirection.Horizontal
headerRow.VerticalAlignment = Enum.VerticalAlignment.Center

local logo = create(header, "TextLabel", {
	Text = "GAMESENSE",
	FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json", Enum.FontWeight.Medium, Enum.FontStyle.Normal),
	TextColor3 = Theme.text,
	TextSize = 20,
	BackgroundTransparency = 1,
	LayoutOrder = 1,
	Size = UDim2.new(0, 160, 1, -20)
})

local spacer = create(header, "Frame", {BackgroundTransparency = 1, LayoutOrder = 2, Size = UDim2.new(1, -360, 1, -20)})

local saveBtn = create(header, "TextButton", {
	Text = "Save",
	FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json", Enum.FontWeight.Medium, Enum.FontStyle.Normal),
	TextSize = 16,
	TextColor3 = Theme.bg,
	BackgroundColor3 = Theme.accent,
	AutoButtonColor = true,
	LayoutOrder = 3,
	Size = UDim2.new(0, 88, 0, 34)
})
roundCorner(saveBtn, 10)

local function hover(button, from, to)
	button.MouseEnter:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.15, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {BackgroundColor3 = to}):Play()
	end)
	button.MouseLeave:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.25, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {BackgroundColor3 = from}):Play()
	end)
end
hover(saveBtn, Theme.accent, Theme.accent:lerp(Color3.new(1,1,1), 0.15))

-- Sidebar
local sidebar = create(window, "Frame", {
	Position = UDim2.new(0,0,0,56),
	Size = UDim2.new(0,210,1,-56),
	BackgroundColor3 = Theme.panel,
	BorderSizePixel = 0
})

padding(sidebar, 12,14,12,14)
local sideList = list(sidebar, "UIListLayout", 8)

local function sideSection(title)
	local section = create(sidebar, "Frame", {BackgroundTransparency = 1, Size = UDim2.new(1,0,0,20)})
	section.AutomaticSize = Enum.AutomaticSize.Y
	local lbl = create(section, "TextLabel", {
		Text = string.upper(title),
		FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json", Enum.FontWeight.Medium, Enum.FontStyle.Normal),
		TextSize = 12,
		TextXAlignment = Enum.TextXAlignment.Left,
		TextTransparency = 0.3,
		TextColor3 = Theme.text,
		BackgroundTransparency = 1,
		Size = UDim2.new(1,0,0,16)
	})
	return section
end

local function sideButton(text, selected)
	local btn = create(sidebar, "TextButton", {
		Size = UDim2.new(1,0,0,34),
		TextXAlignment = Enum.TextXAlignment.Left,
		Text = text,
		BackgroundColor3 = selected and Theme.panelAlt or Theme.panel,
		AutoButtonColor = false,
		FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json"),
		TextSize = 15,
		TextColor3 = selected and Theme.text or Theme.textDim
	})
	roundCorner(btn, 8)
	stroke(btn, Theme.stroke, 1)
	padding(btn, 12,0,8,0)
	btn.MouseEnter:Connect(function()
		TweenService:Create(btn, TweenInfo.new(0.12), {BackgroundColor3 = Theme.panelAlt}):Play()
	end)
	btn.MouseLeave:Connect(function()
		if not selected then TweenService:Create(btn, TweenInfo.new(0.2), {BackgroundColor3 = Theme.panel}):Play() end
	end)
	return btn
end

sideSection("")
sideButton("RageBot")
local aaBtn = sideButton("Anti Aim", true)
sideButton("Legitbot")

sideSection("VISUALS")
sideButton("Players")
sideButton("Weapon")
sideButton("Grenades")
sideButton("Bomb")
sideButton("World")
sideButton("View")

sideSection("MISCELLANEOUS")
sideButton("Main")
sideButton("Inventory")
sideButton("Lua")
sideButton("Configs")

-- Content area
local content = create(window, "Frame", {
	Position = UDim2.new(0, 210, 0, 56),
	Size = UDim2.new(1, -210, 1, -56),
	BackgroundColor3 = Theme.panel,
	BorderSizePixel = 0
})
padding(content, 16,16,16,16)

-- Cards row
local cardsRow = list(content, "UIListLayout", 16)
cardsRow.FillDirection = Enum.FillDirection.Horizontal

local function card(title)
	local frame = create(content, "Frame", {
		Size = UDim2.new(0.5, -8, 1, -16),
		BackgroundColor3 = Theme.panelAlt,
		BorderSizePixel = 0
	})
	roundCorner(frame, 12)
	stroke(frame, Theme.stroke, 1)
	padding(frame, 18,16,18,16)

	local vlist = list(frame, "UIListLayout", 10)
	vlist.FillDirection = Enum.FillDirection.Vertical

	create(frame, "TextLabel", {
		Text = title,
		TextXAlignment = Enum.TextXAlignment.Left,
		FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json", Enum.FontWeight.Medium, Enum.FontStyle.Normal),
		TextSize = 15,
		TextColor3 = Theme.text,
		BackgroundTransparency = 1,
		Size = UDim2.new(1,0,0,18)
	})

	return frame
end

-- Components
local Components = {}

function Components.Switch(parent, labelText, default, onChanged)
	local container = create(parent, "Frame", {BackgroundTransparency = 1, Size = UDim2.new(1,0,0,36)})
	local row = list(container, "UIListLayout", 8)
	row.FillDirection = Enum.FillDirection.Horizontal
	row.VerticalAlignment = Enum.VerticalAlignment.Center

	local lbl = create(container, "TextLabel", {
		Text = labelText,
		BackgroundTransparency = 1,
		TextXAlignment = Enum.TextXAlignment.Left,
		FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json"),
		TextColor3 = Theme.text,
		TextSize = 14,
		Size = UDim2.new(1, -60, 1, 0)
	})

	local knob = create(container, "Frame", {
		Size = UDim2.new(0, 50, 0, 26),
		BackgroundColor3 = Color3.fromRGB(34,34,34)
	})
	roundCorner(knob, 13)
	stroke(knob, Theme.stroke, 1)

	local dot = create(knob, "Frame", {
		Size = UDim2.new(0, 22, 0, 22),
		Position = UDim2.new(0, 2, 0.5, -11),
		BackgroundColor3 = Theme.muted
	})
	roundCorner(dot, 11)

	local state = default == true
	local function render()
		TweenService:Create(dot, TweenInfo.new(0.2, Enum.EasingStyle.Sine, Enum.EasingDirection.Out), {
			Position = UDim2.new(state and 1 or 0, state and -24 or 2, 0.5, -11),
			BackgroundColor3 = state and Theme.accent or Theme.muted
		}):Play()
	end
	render()

	knob.InputBegan:Connect(function(inp)
		if inp.UserInputType == Enum.UserInputType.MouseButton1 or inp.UserInputType == Enum.UserInputType.Touch then
			state = not state
			render()
			if onChanged then onChanged(state) end
		end
	end)

	return setmetatable({}, {__index = {Set = function(_, v) state = v; render() end}})
end

function Components.Slider(parent, labelText, min, max, default, onChanged)
	local container = create(parent, "Frame", {BackgroundTransparency = 1, Size = UDim2.new(1,0,0,44)})
	local lbl = create(container, "TextLabel", {
		Text = labelText,
		BackgroundTransparency = 1,
		TextXAlignment = Enum.TextXAlignment.Left,
		FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json"),
		TextColor3 = Theme.text,
		TextSize = 14,
		Size = UDim2.new(1,0,0,18)
	})

	local bar = create(container, "Frame", {Size = UDim2.new(1,0,0,20), BackgroundTransparency = 1})
	local track = create(bar, "Frame", {
		Size = UDim2.new(1,0,0,6),
		Position = UDim2.new(0,0,0.5,-3),
		BackgroundColor3 = Color3.fromRGB(40,40,40)
	})
	roundCorner(track, 3)
	stroke(track, Theme.stroke, 1)

	local fill = create(track, "Frame", {Size = UDim2.new(0,0,1,0), BackgroundColor3 = Theme.accent})
	roundCorner(fill, 3)

	local thumb = create(bar, "Frame", {Size = UDim2.new(0,14,0,14), BackgroundColor3 = Theme.accent, Position = UDim2.new(0,0,0.5,-7)})
	roundCorner(thumb, 7)

	local valueLbl = create(container, "TextLabel", {
		Text = tostring(default),
		BackgroundTransparency = 1,
		TextXAlignment = Enum.TextXAlignment.Right,
		FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json"),
		TextColor3 = Theme.textDim,
		TextSize = 13,
		AnchorPoint = Vector2.new(1,0),
		Position = UDim2.new(1,0,0,0),
		Size = UDim2.new(0,80,0,18)
	})

	local dragging = false
	local value = math.clamp(default or min, min, max)
	local function render()
		local alpha = (value - min) / (max - min)
		fill.Size = UDim2.new(alpha,0,1,0)
		thumb.Position = UDim2.new(alpha, -7, 0.5, -7)
		valueLbl.Text = string.format("%s", math.floor(value + 0.5))
	end
	render()

	local function setFromX(x)
		local rel = (x - track.AbsolutePosition.X) / track.AbsoluteSize.X
		value = math.clamp(min + rel * (max - min), min, max)
		render()
		if onChanged then onChanged(value) end
	end

	bar.InputBegan:Connect(function(inp)
		if inp.UserInputType == Enum.UserInputType.MouseButton1 or inp.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			setFromX(inp.Position.X)
		end
	end)
	UserInputService.InputChanged:Connect(function(inp)
		if dragging and (inp.UserInputType == Enum.UserInputType.MouseMovement or inp.UserInputType == Enum.UserInputType.Touch) then
			setFromX(inp.Position.X)
		end
	end)
	UserInputService.InputEnded:Connect(function(inp)
		if inp.UserInputType == Enum.UserInputType.MouseButton1 or inp.UserInputType == Enum.UserInputType.Touch then dragging = false end
	end)

	return setmetatable({}, {__index = {Set = function(_, v) value = math.clamp(v, min, max); render() end}})
end

function Components.Dropdown(parent, labelText, items, defaultIndex, onChanged)
	local container = create(parent, "Frame", {BackgroundTransparency = 1, Size = UDim2.new(1,0,0,44)})
	local lbl = create(container, "TextLabel", {
		Text = labelText,
		BackgroundTransparency = 1,
		TextXAlignment = Enum.TextXAlignment.Left,
		FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json"),
		TextColor3 = Theme.text,
		TextSize = 14,
		Size = UDim2.new(1,0,0,18)
	})

	local dd = create(container, "TextButton", {
		Size = UDim2.new(0, 180, 0, 26),
		BackgroundColor3 = Color3.fromRGB(34,34,34),
		TextXAlignment = Enum.TextXAlignment.Left,
		TextColor3 = Theme.textDim,
		FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json"),
		Text = "",
		AutoButtonColor = false
	})
	roundCorner(dd, 8)
	stroke(dd, Theme.stroke, 1)
	padding(dd, 8,0,8,0)

	local choice = create(dd, "TextLabel", {BackgroundTransparency = 1, Size = UDim2.new(1,-16,1,0), TextXAlignment = Enum.TextXAlignment.Left, TextColor3 = Theme.text, FontFace = dd.FontFace, TextSize = 14, Text = ""})
	local arrow = create(dd, "TextLabel", {BackgroundTransparency = 1, Size = UDim2.new(0,16,1,0), AnchorPoint = Vector2.new(1,0), Position = UDim2.new(1,0,0,0), Text = "▼", TextColor3 = Theme.textDim, FontFace = dd.FontFace, TextSize = 12})

	local listFrame = create(container, "Frame", {Size = UDim2.new(0, 200, 0, 0), BackgroundColor3 = Color3.fromRGB(30,30,30), Visible = false})
	roundCorner(listFrame, 8)
	stroke(listFrame, Theme.stroke, 1)
	padding(listFrame, 6,6,6,6)
	listFrame.ZIndex = 5

	local scroller = create(listFrame, "ScrollingFrame", {Size = UDim2.new(1,0,1,0), BackgroundTransparency = 1, CanvasSize = UDim2.new(0,0,0, #items * 28)})
	local ll = list(scroller, "UIListLayout", 4)

	local selected = math.clamp(defaultIndex or 1, 1, #items)
	local function render()
		choice.Text = items[selected]
		if onChanged then onChanged(items[selected], selected) end
	end

	for i, name in ipairs(items) do
		local opt = create(scroller, "TextButton", {Size = UDim2.new(1, -4, 0, 26), BackgroundColor3 = Color3.fromRGB(38,38,38), TextColor3 = Theme.text, TextXAlignment = Enum.TextXAlignment.Left, Text = "  " .. name, AutoButtonColor = true})
		roundCorner(opt, 6)
		opt.MouseButton1Click:Connect(function()
			selected = i
			listFrame.Visible = false
			render()
		end)
	end

	do -- dropdown open/close
		local open = false
		local function setOpen(v)
			open = v
			listFrame.Visible = open
			TweenService:Create(listFrame, TweenInfo.new(0.12), {Size = UDim2.new(0, 200, 0, open and 150 or 0)}):Play()
		end
		dd.MouseButton1Click:Connect(function() setOpen(not open) end)
		UserInputService.InputBegan:Connect(function(inp)
			if open and inp.UserInputType == Enum.UserInputType.MouseButton1 then
				local pos = UserInputService:GetMouseLocation()
				local absPos = listFrame.AbsolutePosition
				local absSize = listFrame.AbsoluteSize
				local inside = pos.X > absPos.X and pos.X < absPos.X + absSize.X and pos.Y > absPos.Y and pos.Y < absPos.Y + absSize.Y
				if not inside then setOpen(false) end
			end
		end)
	end

	render()
	return setmetatable({}, {__index = {SetIndex = function(_, i) selected = math.clamp(i,1,#items); render() end}})
end

-- Build cards and controls
local leftCard = card("Anti-aimbot angles")
local rightCard = card("Fake lag")

-- Put both cards in the same row (half/half)
leftCard.LayoutOrder = 1
rightCard.LayoutOrder = 2

-- Left card grid
local leftGrid = grid(leftCard, 230, 44, nil, nil, 10)

Components.Switch(leftCard, "Enabled", true)
Components.Dropdown(leftCard, "Pitch", {"Off","Down","Zero","Up"}, 1)
Components.Dropdown(leftCard, "Base yaw", {"Local view","At targets","Opposite"}, 1)
Components.Slider(leftCard, "Yaw", -180, 180, 0)
Components.Dropdown(leftCard, "Yaw jitter", {"Off","Offset","Center","Random"}, 1)
Components.Dropdown(leftCard, "Body yaw", {"Off","Static","Random","Jitter"}, 1)
Components.Slider(leftCard, "Freestanding body yaw", 0, 100, 0)
Components.Dropdown(leftCard, "Edge yaw", {"Off","Freestanding"}, 2)
Components.Dropdown(leftCard, "Freestanding", {"Default","Peek","Tight"}, 1)

-- Right card grid
local rightGrid = grid(rightCard, 260, 44, nil, nil, 10)

Components.Switch(rightCard, "Enabled", true)
Components.Dropdown(rightCard, "Amount", {"Static","Dynamic"}, 2)
Components.Slider(rightCard, "Variance", 0, 100, 30)
Components.Slider(rightCard, "Limit", 0, 100, 60)

create(rightCard, "Frame", {BackgroundTransparency = 1, Size = UDim2.new(1,0,0,8)})

create(rightCard, "TextLabel", {Text = "Other", BackgroundTransparency = 1, TextXAlignment = Enum.TextXAlignment.Left, TextColor3 = Theme.text, TextSize = 14, FontFace = Font.new("rbxasset://fonts/families/GothamSSm.json")})

Components.Dropdown(rightCard, "Slow motion", {"Favor high speed","Favor stopping power","Balanced"}, 1)
Components.Dropdown(rightCard, "Leg movement", {"Off","Sliding","Walking"}, 1)
Components.Switch(rightCard, "On shot anti-aim", false)
Components.Switch(rightCard, "Fake peek", false)

-- Responsive adjustments
local function setWide()
	local w = window.AbsoluteSize.X
	if w < 860 then
		leftCard.Size = UDim2.new(1,0,0.5,-8)
		rightCard.Size = UDim2.new(1,0,0.5,-8)
		cardsRow.FillDirection = Enum.FillDirection.Vertical
	else
		leftCard.Size = UDim2.new(0.5,-8,1,-16)
		rightCard.Size = UDim2.new(0.5,-8,1,-16)
		cardsRow.FillDirection = Enum.FillDirection.Horizontal
	end
end
window:GetPropertyChangedSignal("AbsoluteSize"):Connect(setWide)
setWide()

-- Draggable window (header)
local dragging, dragStart, startPos
header.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = window.Position
	end
end)
header.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStart
		window.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)
UserInputService.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
end)

-- Simple state feedback on Save
saveBtn.MouseButton1Click:Connect(function()
	local orig = saveBtn.Text
	saveBtn.Text = "Saved ✓"
	TweenService:Create(saveBtn, TweenInfo.new(0.15), {BackgroundColor3 = Theme.accent:lerp(Color3.new(1,1,1), 0.3)}):Play()
	task.delay(1.1, function()
		saveBtn.Text = orig
		TweenService:Create(saveBtn, TweenInfo.new(0.3), {BackgroundColor3 = Theme.accent}):Play()
	end)
end)
