-- Roblox Client-Side Attribute Scanner
-- Place this in a LocalScript in StarterPlayer > StarterPlayerScripts

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Configuration
local CONFIG = {
	UPDATE_INTERVAL = 1, -- How often to scan (in seconds)
	SCAN_WORKSPACE = true,
	SCAN_REPLICATED_STORAGE = true,
	SCAN_PLAYER = true,
	SHOW_EMPTY = false, -- Show instances with no attributes
	MAX_RESULTS = 100 -- Limit results to prevent lag
}

-- Storage for tracked attributes
local trackedInstances = {}
local resultCount = 0

-- Helper function to get full path of an instance
local function getFullPath(instance)
	local path = instance.Name
	local parent = instance.Parent
	
	while parent and parent ~= game do
		path = parent.Name .. "." .. path
		parent = parent.Parent
	end
	
	return path
end

-- Function to scan an instance for attributes
local function scanInstance(instance)
	if resultCount >= CONFIG.MAX_RESULTS then
		return
	end
	
	local attributes = instance:GetAttributes()
	local hasAttributes = next(attributes) ~= nil
	
	if hasAttributes or CONFIG.SHOW_EMPTY then
		local path = getFullPath(instance)
		
		if not trackedInstances[instance] then
			trackedInstances[instance] = true
			resultCount += 1
			
			print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
			print("ğŸ“ Instance:", instance.Name)
			print("ğŸ“‚ Path:", path)
			print("ğŸ·ï¸  Class:", instance.ClassName)
			
			if hasAttributes then
				print("âœ¨ Attributes:")
				for name, value in pairs(attributes) do
					local valueType = typeof(value)
					print(string.format("   â€¢ %s = %s (%s)", name, tostring(value), valueType))
				end
			else
				print("âœ¨ Attributes: None")
			end
		end
	end
end

-- Recursive function to scan descendants
local function scanDescendants(container, label)
	print("\nğŸ” Scanning:", label)
	print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
	
	scanInstance(container)
	
	for _, descendant in ipairs(container:GetDescendants()) do
		if resultCount >= CONFIG.MAX_RESULTS then
			print("âš ï¸  Result limit reached!")
			break
		end
		scanInstance(descendant)
	end
end

-- Function to watch for attribute changes
local function watchAttributes(instance)
	instance.AttributeChanged:Connect(function(attributeName)
		local value = instance:GetAttribute(attributeName)
		local path = getFullPath(instance)
		
		print("\nğŸ”” ATTRIBUTE CHANGED!")
		print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
		print("ğŸ“ Instance:", instance.Name)
		print("ğŸ“‚ Path:", path)
		print("ğŸ·ï¸  Attribute:", attributeName)
		print("ğŸ’¾ New Value:", tostring(value), "(" .. typeof(value) .. ")")
	end)
end

-- Main scanning function
local function performScan()
	print("\n\n")
	print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
	print("â•‘   ROBLOX ATTRIBUTE SCANNER v1.0    â•‘")
	print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
	print("â° Scan Time:", os.date("%X"))
	
	-- Reset tracking
	trackedInstances = {}
	resultCount = 0
	
	-- Scan different containers
	if CONFIG.SCAN_WORKSPACE then
		scanDescendants(workspace, "Workspace")
	end
	
	if CONFIG.SCAN_REPLICATED_STORAGE then
		local ReplicatedStorage = game:GetService("ReplicatedStorage")
		scanDescendants(ReplicatedStorage, "ReplicatedStorage")
	end
	
	if CONFIG.SCAN_PLAYER and player.Character then
		scanDescendants(player.Character, "Player Character")
	end
	
	print("\n")
	print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
	print("â•‘         SCAN COMPLETE              â•‘")
	print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
	print("ğŸ“Š Total instances with attributes:", resultCount)
	print("â° Next scan in", CONFIG.UPDATE_INTERVAL, "seconds")
end

-- Watch for new instances being added
local function setupWatchers(container)
	container.DescendantAdded:Connect(function(descendant)
		watchAttributes(descendant)
	end)
	
	-- Watch existing descendants
	for _, descendant in ipairs(container:GetDescendants()) do
		watchAttributes(descendant)
	end
	
	-- Watch the container itself
	watchAttributes(container)
end

-- Initialize
print("ğŸš€ Attribute Scanner Initialized!")
print("âš™ï¸  Configuration:")
print("   â€¢ Update Interval:", CONFIG.UPDATE_INTERVAL, "seconds")
print("   â€¢ Scan Workspace:", CONFIG.SCAN_WORKSPACE)
print("   â€¢ Scan ReplicatedStorage:", CONFIG.SCAN_REPLICATED_STORAGE)
print("   â€¢ Scan Player:", CONFIG.SCAN_PLAYER)
print("   â€¢ Show Empty:", CONFIG.SHOW_EMPTY)

-- Setup attribute change watchers
if CONFIG.SCAN_WORKSPACE then
	setupWatchers(workspace)
end

if CONFIG.SCAN_REPLICATED_STORAGE then
	setupWatchers(game:GetService("ReplicatedStorage"))
end

-- Watch player character
player.CharacterAdded:Connect(function(character)
	if CONFIG.SCAN_PLAYER then
		setupWatchers(character)
	end
end)

if player.Character and CONFIG.SCAN_PLAYER then
	setupWatchers(player.Character)
end

-- Perform initial scan
performScan()

-- Setup periodic scanning
while true do
	task.wait(CONFIG.UPDATE_INTERVAL)
	performScan()
end
